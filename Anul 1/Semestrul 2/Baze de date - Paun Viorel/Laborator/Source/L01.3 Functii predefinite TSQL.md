# L01.3 Functii predefinite TSQL

 ```sql
--FUNCTII MATEMATICE
SELECT 5+3*7;
SELECT PI();
SELECT DEGREES(PI());
SELECT DEGREES(PI()/6)
SELECT RADIANS(180.0)
SELECT RADIANS(30.0)
SELECT SIN(RADIANS(30.0))
SELECT COS(RADIANS(60.0))
SELECT TAN(RADIANS(45.0))
SELECT COT(RADIANS(45.0))
SELECT TAN(RADIANS(90.0))

--FUNCTIILE INVERSE
SELECT DEGREES(ACOS (0.5))
SELECT ASIN(0.5)
SELECT DEGREES(ASIN(0.5))
SELECT DEGREES(ATAN(1))

-- ATN2(Y,X) = ARCTAN(Y/X)
SELECT DEGREES(ATN2(1,1)) --> 45
SELECT DEGREES(ATN2(1,-1)) --> 135
SELECT DEGREES(ATN2(-1,-1)) --> -135
SELECT DEGREES(ATN2(-1,1)) --> -45

--EXPONENTIAL
SELECT EXP(1) --> e^1
SELECT EXP(2) --> e^2

--LOGARITM
SELECT LOG(EXP(2)) --> 2
select log10(1000) --> 3 (logaritm in baza 10 )
SELECT EXP(LOG(2)) --> 2

--POWER
SELECT POWER (2,4) -->16

--SQRT
SELECT SQRT (25) -->5

--SQUARE
SELECT SQUARE (5) -> 5^2
SELECT POWER (27.0 , 1 / 3.0) --> 27^(1/3)

--CEILING -TAVAN (CEL MAI MIC NUMAR INTREG MAI MARE DECAT ARGUMENTUL)
SELECT CEILING(7.53)
SELECT CEILING(7.43)
SELECT CEILING(-7.53)

--FLOOR - PODEA(CEL MAI MARE NUMAR INTREG MAI MIC DECAT ARGUMENTUL)
SELECT FLOOR(7.53)
SELECT FLOOR(-7.53)

--ROUND Round(expr,  nr zec [, mod rotunjire]) mod rotunjire implicit 0=rotunjire propriu-zisa
--mod rotunjire <> 0 -> trunchiere
SELECT ROUND (7.532346335,2) --> 7.53
SELECT ROUND (7.535346335,2) --> 7.54
SELECT ROUND (7.535346335,0) --> 8

--TRUNCHIERE 
SELECT ROUND(7.53534,2,1) --> 7.5
SELECT ROUND(23.0/3,2,1) --> 7.66
SELECT ROUND(23.0/3,2,0) -->7.67

--RANDOM - GENEREAZA UN NR ALEATOR INTRE 0 SI 1
SELECT RAND()
SELECT ROUND(Rand()*100.0,0) --valori aleatoare intre 0 si 100
SELECT ROUND(Rand()*200.0,0)-100 --valori aleatoare intre -100 si 100

--Lucrul cu siruri de caractere
select ascii('a')
select ascii('A')
select CHAR (97)
SELECT LEN('ABCD')
SELECT LOWER('ABCDxyz') --transforma in litere mici
select upper('ABCDxyz') --transforma in litere mari
select left ('abcsrehhr',3) --> abc
select right ('abcsrehhr',3) -->hhr
select substring ('abcsrehhr',3,2) --> cs
select charindex('bc','abcabcdabcd') --> 2
select charindex('bc','abcabcdabcd',3) --> 5
select charindex('bc','abcabcdabcd',6) --> 7
select charindex('bc','abcabcdabcd',9)
select charindex('bc','abcabcdabcd',10) --> 0
select 'abc' + 'xyz' -->abcxyz
select '|' + ltrim('        pitesti      ')+'|' --> |pitesti      |
select '|' + rtrim('        pitesti      ')+'|' --> |        pitesti|
select replace ('abcdabcdabcd','bc','xyz') --> axyzdaxyzdaxyzd
select replace ('        ene    alex    ',' ', '') --> enealex

--stuff
select stuff('mere',1,2,'mu') -->mure
select stuff('mere',1,1,'p') -->pere

--replicate
select replicate('*', 8) --> ********
select '|' + space(10) + '|' -> |          |
select str(357.48321,15,2) --convertire din numar in string   357.48
select replace(str(357.48321,10,2),' ','*') --> ****357.48
select reverse('abc') -->cba
select reverse(4678) -->8764
select reverse(4678) as Sir_INVERSAT

-----------------------------------------------------------------

select getdate()
select getdate()+1 as maine
select getdate()-1 as ieri
select year(getdate()) 
select month(getdate()) 
select day(getdate()) 
select datepart (year,getdate())
select datepart (hh,getdate())
select datepart (hour,getdate()) --ore
select datepart (minute,getdate()) --minute
select datepart (mi,getdate()) --minute
select datepart (n,getdate()) --minute
select datepart (second,getdate()) --secunde
select datepart (ss,getdate()) --secunde
select datepart (mm,getdate()) --luna
select datepart (ms,getdate()) --milisecunde
select datepart(dy,getdate()) --a cata zi din an este azi
select datepart(dw,getdate()) 
select datepart(w,getdate()) --a cata saptamana din luna
select datepart(ww,getdate()) --a cata saptamana din an
select datepart(q,getdate()) --trimestru

--google : t sql datepart
--functia de adunare
select dateadd(day,50,getdate()) --adaugam la data (zi) 50 de zile
select dateadd(hh,50,getdate()) -- adaugam la data,50 de ore
select datediff(dd,'1996/10/12',getdate()) --cate zile a trait luiza pana acum
select datediff(yy,'1996/10/12',getdate()) 

--functia de conversie
--convert (tipdata,expresie[,stil])
select convert(varchar(20),getdate(),1) -- ll/zz/aa
select convert(varchar(20),getdate(),101) --ll/zz/aaaa
select convert(varchar(20),getdate(),2) --18.02.21
select convert(varchar(20),getdate(),102) --2018.02.21
select convert(varchar(20),getdate(),3) --21/02/18
select convert(varchar(20),getdate(),103) --21/02/2018
select convert(varchar(20),getdate(),4) --21.02.18
select convert(varchar(20),getdate(),104) --21.02.2018
select convert(varchar(20),getdate(),5) -- 21-02-18
select convert(varchar(20),getdate(),105) -- 21-02-2018
select convert(varchar(20),getdate(),6) -- 21 Feb 18
select convert(varchar(20),getdate(),106) --21 Feb 2018
select convert(varchar(20),getdate(),7) --Feb 21, 18
select convert(varchar(20),getdate(),107) --Feb 21, 2018
select convert(varchar(20),getdate(),8) -- 14:59:20
select convert(varchar(20),getdate(),108) -- 14:59:29
select convert(varchar(20),getdate(),9) -- Feb 21 2018  2:59:38
select convert(varchar(20),getdate(),109) --  Feb 21 2018  2:59:45
select convert(varchar(20),getdate(),10) -- 02-21-18
select convert(varchar(20),getdate(),110) --  02-21-2018
select convert(varchar(20),getdate(),11) -- 18/02/21
select convert(varchar(20),getdate(),111) -- 2018/02/21
select convert(varchar(20),getdate(),12) -- 180221 ISO
select convert(varchar(20),getdate(),112) -- 20180221 ISO
select convert(varchar(20),getdate(),13) -- 21 Feb 2018 15:20:47
select convert(varchar(20),getdate(),113) -- 21 Feb 2018 15:21:00
select convert(varchar(20),getdate(),14) -- 15:21:16:710
select convert(varchar(20),getdate(),114) -- 15:21:24:010
select convert(varchar(20),getdate(),20) -- 2018-02-21 15:22:12
select convert(varchar(20),getdate(),120) -- 2018-02-21 15:22:19

--convertim la data normala un standard
select convert(datetime,convert(varchar(20),getdate(),102),102)
select convert(datetime,convert(varchar(20),getdate(),12),12)
select convert(datetime,'12/10/2007',103)
select '12/10/2007' + 1 -- nu merge!
select convert(datetime,'12/10/2007',103) + 1 --merge!
-- finish
 ```

